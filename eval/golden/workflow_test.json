{
  "_meta": {
    "source_image": "workflow_test.jpeg",
    "title": "Lipid Results - Management Guide",
    "notes": [
      "Normal cholesterol assumed to be 5 or below (can vary clinic to clinic)",
      "Primary = no heart problem yet occurred (MI or Stroke)",
      "Secondary = known CHD, PAD, Ischaemic Stroke, CAD or MI in the past",
      "Post-Inclisiran follow-up loop (LDL >2.0 reassessment) represented as terminal outputs since trees cannot have cycles"
    ]
  },
  "inputs": [
    {
      "id": "input_total_cholesterol_float",
      "name": "Total Cholesterol",
      "type": "float",
      "description": "Patient's total cholesterol result"
    },
    {
      "id": "input_under_specialist_clinic_bool",
      "name": "Under Specialist Clinic",
      "type": "bool",
      "description": "Whether the patient is under a specialist clinic"
    },
    {
      "id": "input_optimised_on_treatment_bool",
      "name": "Optimised on Treatment",
      "type": "bool",
      "description": "Whether the patient's current treatment is optimised"
    },
    {
      "id": "input_taking_lipid_lowering_therapy_bool",
      "name": "Taking Lipid Lowering Therapy",
      "type": "bool",
      "description": "Whether the patient is currently taking lipid lowering therapy"
    },
    {
      "id": "input_primary_or_secondary_prevention_enum",
      "name": "Primary or Secondary Prevention",
      "type": "enum",
      "description": "Whether the patient requires primary or secondary prevention",
      "enum_values": ["Primary", "Secondary"]
    },
    {
      "id": "input_qrisk_score_float",
      "name": "QRISK2/3 Score",
      "type": "float",
      "description": "Patient's QRISK2/3 cardiovascular risk score as a percentage"
    },
    {
      "id": "input_taking_maximally_tolerated_statin_bool",
      "name": "Taking Maximally Tolerated Statin",
      "type": "bool",
      "description": "Whether the patient is taking the maximally tolerated statin dose"
    },
    {
      "id": "input_ldl_level_float",
      "name": "LDL Level",
      "type": "float",
      "description": "Patient's LDL cholesterol level"
    }
  ],
  "outputs": [
    {"name": "No Further Action", "description": "No further clinical action required"},
    {"name": "Mark as Satisfactory", "description": "Mark the cholesterol result as satisfactory"},
    {"name": "Mark as No Further Action", "description": "Mark as no further action needed (not on lipid lowering therapy with raised cholesterol)"},
    {"name": "Consultation", "description": "Book a consultation for lipid management"},
    {"name": "Refer to specialist", "description": "Refer patient to lipid specialist clinic"},
    {"name": "Send Lipid Lowering Therapy AccuRx with self booking link", "description": "Send AccuRx message for lipid lowering therapy with self-booking link"},
    {"name": "Send High Cholesterol - Low QRISK AccuRx with self booking link", "description": "Send AccuRx message for high cholesterol with low QRISK score"},
    {"name": "Add in Ezetimibe", "description": "Add Ezetimibe to treatment regimen"},
    {"name": "Initiate Inclisiran", "description": "Initiate Inclisiran treatment"},
    {"name": "Repeat Lipids at 3 months", "description": "Repeat lipid blood tests in 3 months for reassessment"}
  ],
  "tree": {
    "start": {
      "id": "start",
      "type": "start",
      "label": "Start",
      "children": [
        {
          "id": "assess_total_cholesterol",
          "type": "decision",
          "label": "Assess Total Cholesterol Result",
          "input_ids": ["input_total_cholesterol_float"],
          "condition": {
            "input_id": "input_total_cholesterol_float",
            "comparator": "gt",
            "value": 7.5
          },
          "children": [
            {
              "id": "under_specialist_clinic",
              "type": "decision",
              "label": "Under Specialist Clinic?",
              "edge_label": "> 7.5",
              "input_ids": ["input_under_specialist_clinic_bool"],
              "condition": {
                "input_id": "input_under_specialist_clinic_bool",
                "comparator": "is_true"
              },
              "children": [
                {
                  "id": "out_no_further_action_specialist",
                  "type": "output",
                  "label": "No Further Action",
                  "edge_label": "Yes",
                  "children": []
                },
                {
                  "id": "optimised_high_tc",
                  "type": "decision",
                  "label": "Are They Optimised on treatment?",
                  "edge_label": "No",
                  "input_ids": ["input_optimised_on_treatment_bool"],
                  "condition": {
                    "input_id": "input_optimised_on_treatment_bool",
                    "comparator": "is_true"
                  },
                  "children": [
                    {
                      "id": "consider_referral",
                      "type": "action",
                      "label": "Consider Lipid Clinic Referral",
                      "edge_label": "Yes",
                      "children": [
                        {
                          "id": "out_refer_specialist",
                          "type": "output",
                          "label": "Refer to specialist",
                          "children": []
                        }
                      ]
                    },
                    {
                      "id": "send_llt_high_tc",
                      "type": "action",
                      "label": "Send Lipid Lowering Therapy AccuRx with self booking link",
                      "edge_label": "No",
                      "children": [
                        {
                          "id": "out_consultation",
                          "type": "output",
                          "label": "Consultation",
                          "children": []
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "normal_or_raised",
              "type": "decision",
              "label": "Normal or Raised?",
              "edge_label": "≤ 7.5",
              "input_ids": ["input_total_cholesterol_float"],
              "condition": {
                "input_id": "input_total_cholesterol_float",
                "comparator": "gt",
                "value": 5
              },
              "children": [
                {
                  "id": "taking_llt",
                  "type": "decision",
                  "label": "Taking Lipid Lowering Therapy?",
                  "edge_label": "Raised",
                  "input_ids": ["input_taking_lipid_lowering_therapy_bool"],
                  "condition": {
                    "input_id": "input_taking_lipid_lowering_therapy_bool",
                    "comparator": "is_true"
                  },
                  "children": [
                    {
                      "id": "optimised_raised",
                      "type": "decision",
                      "label": "Are They Optimised on treatment?",
                      "edge_label": "Yes",
                      "input_ids": ["input_optimised_on_treatment_bool"],
                      "condition": {
                        "input_id": "input_optimised_on_treatment_bool",
                        "comparator": "is_true"
                      },
                      "children": [
                        {
                          "id": "primary_or_secondary",
                          "type": "decision",
                          "label": "Primary or Secondary Prevention?",
                          "edge_label": "Yes",
                          "input_ids": ["input_primary_or_secondary_prevention_enum"],
                          "condition": {
                            "input_id": "input_primary_or_secondary_prevention_enum",
                            "comparator": "enum_eq",
                            "value": "Primary"
                          },
                          "children": [
                            {
                              "id": "calculate_qrisk",
                              "type": "decision",
                              "label": "Calculate QRISK2/3",
                              "edge_label": "Primary",
                              "input_ids": ["input_qrisk_score_float"],
                              "condition": {
                                "input_id": "input_qrisk_score_float",
                                "comparator": "gte",
                                "value": 10
                              },
                              "children": [
                                {
                                  "id": "send_llt_qrisk_high",
                                  "type": "action",
                                  "label": "Send Lipid Lowering Therapy AccuRx with self booking link",
                                  "edge_label": "≥ 10%",
                                  "children": [
                                    {
                                      "id": "out_add_ezetimibe",
                                      "type": "output",
                                      "label": "Add in Ezetimibe",
                                      "children": []
                                    }
                                  ]
                                },
                                {
                                  "id": "out_send_high_chol_low_qrisk",
                                  "type": "output",
                                  "label": "Send High Cholesterol - Low QRISK AccuRx with self booking link",
                                  "edge_label": "< 10%",
                                  "children": []
                                }
                              ]
                            },
                            {
                              "id": "taking_max_statin",
                              "type": "decision",
                              "label": "Taking Maximally Tolerated Statin?",
                              "edge_label": "Secondary",
                              "input_ids": ["input_taking_maximally_tolerated_statin_bool"],
                              "condition": {
                                "input_id": "input_taking_maximally_tolerated_statin_bool",
                                "comparator": "is_true"
                              },
                              "children": [
                                {
                                  "id": "assess_ldl",
                                  "type": "decision",
                                  "label": "Assess LDL",
                                  "edge_label": "Yes",
                                  "input_ids": ["input_ldl_level_float"],
                                  "condition": {
                                    "input_id": "input_ldl_level_float",
                                    "comparator": "lte",
                                    "value": 2
                                  },
                                  "children": [
                                    {
                                      "id": "out_no_further_action_ldl",
                                      "type": "output",
                                      "label": "No Further Action",
                                      "edge_label": "LDL ≤ 2",
                                      "children": []
                                    },
                                    {
                                      "id": "ldl_high_check",
                                      "type": "decision",
                                      "label": "LDL ≥ 2.6?",
                                      "edge_label": "LDL > 2",
                                      "input_ids": ["input_ldl_level_float"],
                                      "condition": {
                                        "input_id": "input_ldl_level_float",
                                        "comparator": "gte",
                                        "value": 2.6
                                      },
                                      "children": [
                                        {
                                          "id": "out_initiate_inclisiran",
                                          "type": "output",
                                          "label": "Initiate Inclisiran",
                                          "edge_label": "LDL ≥ 2.6",
                                          "children": []
                                        },
                                        {
                                          "id": "out_repeat_lipids",
                                          "type": "output",
                                          "label": "Repeat Lipids at 3 months",
                                          "edge_label": "LDL 2-2.5",
                                          "children": []
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": "out_send_llt_no_statin",
                                  "type": "output",
                                  "label": "Send Lipid Lowering Therapy AccuRx with self booking link",
                                  "edge_label": "No",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": "out_send_llt_not_optimised",
                          "type": "output",
                          "label": "Send Lipid Lowering Therapy AccuRx with self booking link",
                          "edge_label": "No",
                          "children": []
                        }
                      ]
                    },
                    {
                      "id": "out_no_further_action_no_llt",
                      "type": "output",
                      "label": "Mark as No Further Action",
                      "edge_label": "No",
                      "children": []
                    }
                  ]
                },
                {
                  "id": "out_mark_satisfactory",
                  "type": "output",
                  "label": "Mark as Satisfactory",
                  "edge_label": "Normal",
                  "children": []
                }
              ]
            }
          ]
        }
      ]
    }
  },
  "doubts": [
    "The threshold for 'Normal' cholesterol is stated as 5 or below but noted as varying between clinics",
    "Post-Inclisiran follow-up pathway (LDL >2.0 reassessment after 6 months) contains a loop which cannot be represented in a tree structure",
    "The diagram contains informational side panels (Maximally Tolerated Treatment Order, treatment optimisation criteria, Inclisiran vs Ezetimibe ordering) that provide context but are not part of the decision flow"
  ]
}
