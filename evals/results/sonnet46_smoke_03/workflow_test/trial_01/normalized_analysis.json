{
  "inputs": [],
  "outputs": [
    {
      "name": "No Further Action",
      "description": "No further action required (cholesterol satisfactory)"
    },
    {
      "name": "Mark as Satisfactory",
      "description": "Mark cholesterol result as satisfactory"
    },
    {
      "name": "Mark as \"No Further Action\"",
      "description": "Mark as no further action (not taking lipid lowering therapy, raised cholesterol)"
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx message with self booking link (taking therapy, not optimised)"
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx message with self booking link (not taking maximally tolerated statin)"
    },
    {
      "name": "Send \"High Cholesterol - Low QRISK\" AccuRx with self booking link",
      "description": "Send high cholesterol low QRISK AccuRx message with self booking link"
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx message (upper pathway, not optimised)"
    },
    {
      "name": "Consider Lipid Clinic Referral",
      "description": "Consider referring to lipid clinic"
    },
    {
      "name": "Refer to specilaist",
      "description": "Refer patient to specialist"
    },
    {
      "name": "No Further Action",
      "description": "No further action (LDL \u22642 after assessing LDL)"
    },
    {
      "name": "Initiate Inclisiran",
      "description": "Initiate Inclisiran treatment"
    },
    {
      "name": "Add in Ezetimibe",
      "description": "Add Ezetimibe to treatment"
    },
    {
      "name": "Repeat Lipids at 3 months",
      "description": "Repeat lipid test at 3 months"
    }
  ],
  "tree": {
    "start": {
      "id": "start",
      "type": "start",
      "label": "Lipid Results - Management Guide",
      "children": [
        {
          "id": "n_assess_cholesterol",
          "type": "action",
          "label": "Assess Total Cholesterol Result",
          "input_ids": [
            "input_total_cholesterol_result_float"
          ],
          "edge_label": "",
          "children": [
            {
              "id": "n_cholesterol_threshold",
              "type": "decision",
              "label": "> 7.5 or \u2264 7.5?",
              "input_ids": [
                "input_total_cholesterol_result_float"
              ],
              "condition": {
                "input_id": "input_total_cholesterol_result_float",
                "comparator": "gt",
                "value": 7.5
              },
              "children": [
                {
                  "id": "n_under_specialist",
                  "type": "decision",
                  "label": "Under Specialist Clinic?",
                  "input_ids": [
                    "input_under_specialist_clinic_bool"
                  ],
                  "condition": {
                    "input_id": "input_under_specialist_clinic_bool",
                    "comparator": "is_true"
                  },
                  "edge_label": "true",
                  "children": [
                    {
                      "id": "n_no_further_action_specialist",
                      "type": "output",
                      "label": "No Further Action",
                      "edge_label": "true",
                      "children": []
                    },
                    {
                      "id": "n_primary_secondary_upper",
                      "type": "decision",
                      "label": "Primary/Secondary Treatment",
                      "input_ids": [
                        "input_prevention_type_enum"
                      ],
                      "condition": {
                        "input_id": "input_prevention_type_enum",
                        "comparator": "enum_eq",
                        "value": "Primary"
                      },
                      "edge_label": "false",
                      "children": [
                        {
                          "id": "n_optimised_upper",
                          "type": "decision",
                          "label": "Are They Optimised on treatment?",
                          "input_ids": [
                            "input_optimised_on_treatment_upper_bool"
                          ],
                          "condition": {
                            "input_id": "input_optimised_on_treatment_upper_bool",
                            "comparator": "is_true"
                          },
                          "edge_label": "true",
                          "children": [
                            {
                              "id": "n_consider_lipid_clinic",
                              "type": "output",
                              "label": "Consider Lipid Clinic Referral",
                              "edge_label": "false",
                              "children": []
                            },
                            {
                              "id": "n_refer_specialist",
                              "type": "output",
                              "label": "Refer to specilaist",
                              "edge_label": "true",
                              "children": []
                            }
                          ]
                        },
                        {
                          "id": "n_send_llt_upper_not_optimised",
                          "type": "output",
                          "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                          "edge_label": "false",
                          "children": []
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "n_normal_or_raised",
                  "type": "decision",
                  "label": "Normal or Raised?",
                  "input_ids": [
                    "input_cholesterol_normal_or_raised_enum"
                  ],
                  "condition": {
                    "input_id": "input_cholesterol_normal_or_raised_enum",
                    "comparator": "enum_eq",
                    "value": "Normal"
                  },
                  "edge_label": "false",
                  "children": [
                    {
                      "id": "n_mark_satisfactory",
                      "type": "output",
                      "label": "Mark as Satisfactory",
                      "edge_label": "true",
                      "children": []
                    },
                    {
                      "id": "n_taking_llt",
                      "type": "decision",
                      "label": "Taking Lipid Lowering Therapy?",
                      "input_ids": [
                        "input_taking_lipid_lowering_therapy_bool"
                      ],
                      "condition": {
                        "input_id": "input_taking_lipid_lowering_therapy_bool",
                        "comparator": "is_true"
                      },
                      "edge_label": "false",
                      "children": [
                        {
                          "id": "n_optimised_treatment",
                          "type": "decision",
                          "label": "Are They Optimised on treatment?",
                          "input_ids": [
                            "input_optimised_on_treatment_bool"
                          ],
                          "condition": {
                            "input_id": "input_optimised_on_treatment_bool",
                            "comparator": "is_true"
                          },
                          "edge_label": "true",
                          "children": [
                            {
                              "id": "n_mark_no_further_action",
                              "type": "output",
                              "label": "Mark as \"No Further Action\"",
                              "edge_label": "true",
                              "children": []
                            },
                            {
                              "id": "n_send_llt_not_optimised",
                              "type": "output",
                              "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                              "edge_label": "false",
                              "children": []
                            }
                          ]
                        },
                        {
                          "id": "n_primary_secondary_prevention",
                          "type": "decision",
                          "label": "Primary or Secondary Prevention?",
                          "input_ids": [
                            "input_prevention_type_enum"
                          ],
                          "condition": {
                            "input_id": "input_prevention_type_enum",
                            "comparator": "enum_eq",
                            "value": "Primary"
                          },
                          "edge_label": "false",
                          "children": [
                            {
                              "id": "n_calculate_qrisk",
                              "type": "action",
                              "label": "Calculate QRISK2/3",
                              "input_ids": [
                                "input_qrisk_score_float"
                              ],
                              "edge_label": "true",
                              "children": [
                                {
                                  "id": "n_qrisk_threshold",
                                  "type": "decision",
                                  "label": "\u2265 10% or < 10%?",
                                  "input_ids": [
                                    "input_qrisk_score_float"
                                  ],
                                  "condition": {
                                    "input_id": "input_qrisk_score_float",
                                    "comparator": "gte",
                                    "value": 10
                                  },
                                  "children": [
                                    {
                                      "id": "n_send_llt_qrisk_high",
                                      "type": "output",
                                      "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                                      "edge_label": "true",
                                      "children": []
                                    },
                                    {
                                      "id": "n_send_high_chol_low_qrisk",
                                      "type": "output",
                                      "label": "Send \"High Cholesterol - Low QRISK\" AccuRx with self booking link",
                                      "edge_label": "false",
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": "n_taking_max_statin",
                              "type": "decision",
                              "label": "Taking Maximally Tolerated Statin?",
                              "input_ids": [
                                "input_taking_maximally_tolerated_statin_bool"
                              ],
                              "condition": {
                                "input_id": "input_taking_maximally_tolerated_statin_bool",
                                "comparator": "is_true"
                              },
                              "edge_label": "false",
                              "children": [
                                {
                                  "id": "n_assess_ldl",
                                  "type": "action",
                                  "label": "Assess LDL",
                                  "input_ids": [
                                    "input_ldl_float"
                                  ],
                                  "edge_label": "true",
                                  "children": [
                                    {
                                      "id": "n_ldl_decision",
                                      "type": "decision",
                                      "label": "LDL \u2265 2.6 or LDL 2-2.5 or LDL \u22642?",
                                      "input_ids": [
                                        "input_ldl_float"
                                      ],
                                      "condition": {
                                        "input_id": "input_ldl_float",
                                        "comparator": "gte",
                                        "value": 2.6
                                      },
                                      "children": [
                                        {
                                          "id": "n_initiate_inclisiran",
                                          "type": "output",
                                          "label": "Initiate Inclisiran",
                                          "edge_label": "true",
                                          "children": []
                                        },
                                        {
                                          "id": "n_ldl_2_25_decision",
                                          "type": "decision",
                                          "label": "LDL 2-2.5?",
                                          "input_ids": [
                                            "input_ldl_float"
                                          ],
                                          "condition": {
                                            "input_id": "input_ldl_float",
                                            "comparator": "within_range",
                                            "value": 2.0,
                                            "value2": 2.5
                                          },
                                          "edge_label": "false",
                                          "children": [
                                            {
                                              "id": "n_had_inclisiran",
                                              "type": "decision",
                                              "label": "Has had 6 months of Inclisiran / Hasn't had 6 months of Inclisiran",
                                              "input_ids": [
                                                "input_had_6_months_inclisiran_bool"
                                              ],
                                              "condition": {
                                                "input_id": "input_had_6_months_inclisiran_bool",
                                                "comparator": "is_true"
                                              },
                                              "edge_label": "true",
                                              "children": [
                                                {
                                                  "id": "n_ldl_gt_2",
                                                  "type": "decision",
                                                  "label": "LDL >2.0",
                                                  "input_ids": [
                                                    "input_ldl_float"
                                                  ],
                                                  "condition": {
                                                    "input_id": "input_ldl_float",
                                                    "comparator": "gt",
                                                    "value": 2.0
                                                  },
                                                  "edge_label": "true",
                                                  "children": [
                                                    {
                                                      "id": "n_add_ezetimibe",
                                                      "type": "output",
                                                      "label": "Add in Ezetimibe",
                                                      "edge_label": "true",
                                                      "children": []
                                                    },
                                                    {
                                                      "id": "n_repeat_lipids",
                                                      "type": "output",
                                                      "label": "Repeat Lipids at 3 months",
                                                      "edge_label": "false",
                                                      "children": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": "n_repeat_lipids_no_inclisiran",
                                                  "type": "output",
                                                  "label": "Repeat Lipids at 3 months",
                                                  "edge_label": "false",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "id": "n_no_further_action_ldl",
                                              "type": "output",
                                              "label": "No Further Action",
                                              "edge_label": "false",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": "n_send_llt_no_max_statin",
                                  "type": "output",
                                  "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                                  "edge_label": "false",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  },
  "doubts": [
    "The upper pathway 'Primary/Secondary Treatment' node appears to split differently from the lower pathway - it's unclear if both primary and secondary routes lead to the same 'Are They Optimised on treatment?' decision or if they diverge before that.",
    "The 'not coded, assume no' yellow note near 'Under Specialist Clinic?' suggests a default value assumption - it is unclear if this should be modelled as a default input value or a separate branch.",
    "The 'Consultation' label near the upper pathway's 'Send Lipid Lowering Therapy AccuRx' node is ambiguous - it may be a separate action or just a label.",
    "There are multiple nodes with the same label 'Send \"Lipid Lowering Therapy\" AccuRx with self booking link' - it is ambiguous whether these are truly separate outputs or convergent paths.",
    "The LDL 2-2.5 branch and the Inclisiran/Ezetimibe pathway logic is complex and may not be fully captured - particularly the relationship between 'Hasn't had 6 months of Inclisiran' leading to 'Repeat Lipids at 3 months' vs. the LDL >2.0 check.",
    "The threshold for 'Normal' cholesterol is noted as 'We assume Normal to be 5 or below (can vary from clinic to clinic)' - this threshold is not encoded as a fixed value in the diagram.",
    "The diagram shows two separate 'Are They Optimised on treatment?' decision nodes (one in the lower path for patients taking LLT, one in the upper path after specialist check) - their exact positions and connections need verification."
  ],
  "variables": [
    {
      "id": "input_total_cholesterol_result_float",
      "name": "total_cholesterol_result",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_under_specialist_clinic_bool",
      "name": "under_specialist_clinic",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_prevention_type_enum",
      "name": "prevention_type",
      "type": "enum",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_optimised_on_treatment_upper_bool",
      "name": "optimised_on_treatment_upper",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_cholesterol_normal_or_raised_enum",
      "name": "cholesterol_normal_or_raised",
      "type": "enum",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_taking_lipid_lowering_therapy_bool",
      "name": "taking_lipid_lowering_therapy",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_optimised_on_treatment_bool",
      "name": "optimised_on_treatment",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_qrisk_score_float",
      "name": "qrisk_score",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_taking_maximally_tolerated_statin_bool",
      "name": "taking_maximally_tolerated_statin",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_ldl_float",
      "name": "ldl",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_had_6_months_inclisiran_bool",
      "name": "had_6_months_inclisiran",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    }
  ]
}