{
  "inputs": [],
  "outputs": [
    {
      "name": "Start Gliclazide or Insulin",
      "description": "Start patient on Gliclazide or Insulin"
    },
    {
      "name": "Admit via A&E/Medics",
      "description": "Admit patient via A&E or Medics"
    },
    {
      "name": "Metformin (no CVD risk)",
      "description": "Start Metformin - patient not at risk of CVD"
    },
    {
      "name": "Metformin (CVD path)",
      "description": "Start Metformin for CVD known or risk patient"
    },
    {
      "name": "Dual Therapy: Gliptin or Pioglitazone or Gliclazide",
      "description": "Start dual therapy with Gliptin, Pioglitazone or Gliclazide added to Metformin"
    },
    {
      "name": "Triple Therapy: Metformin + Gliptin/Pioglitazone/Gliclazide (consider SGLT2i)",
      "description": "Start triple therapy"
    },
    {
      "name": "Ozempic (CVD path)",
      "description": "Ozempic for high prognostic value patients"
    },
    {
      "name": "Mounjaro",
      "description": "Mounjaro for low prognostic value patients"
    },
    {
      "name": "Ozempic titrate to full dose with 3 monthly A1cs",
      "description": "Ozempic titrated to full dose with 3 monthly A1c monitoring"
    },
    {
      "name": "Refer to Insulin Initiator",
      "description": "Refer patient to Insulin Initiator"
    },
    {
      "name": "SGLT2i (CVD path)",
      "description": "Add SGLT2i for CVD path patient after Metformin"
    }
  ],
  "tree": {
    "start": {
      "id": "start",
      "type": "start",
      "label": "Treatment Algorithm",
      "children": [
        {
          "id": "n1",
          "type": "decision",
          "label": "*CVD Known or Risk",
          "input_ids": [
            "input_cvd_known_or_risk_bool"
          ],
          "condition": {
            "input_id": "input_cvd_known_or_risk_bool",
            "comparator": "is_true"
          },
          "children": [
            {
              "id": "n2",
              "type": "action",
              "label": "Metformin",
              "edge_label": "true",
              "input_ids": [],
              "children": [
                {
                  "id": "n3",
                  "type": "decision",
                  "label": "Metformin tolerated after 4 weeks?",
                  "input_ids": [
                    "input_metformin_tolerated_bool"
                  ],
                  "condition": {
                    "input_id": "input_metformin_tolerated_bool",
                    "comparator": "is_true"
                  },
                  "children": [
                    {
                      "id": "n4",
                      "type": "action",
                      "label": "SGLT2i",
                      "edge_label": "true",
                      "children": [
                        {
                          "id": "n5",
                          "type": "decision",
                          "label": "A1c not controlled on SGLT2i?",
                          "input_ids": [
                            "input_sglt2i_a1c_controlled_bool"
                          ],
                          "condition": {
                            "input_id": "input_sglt2i_a1c_controlled_bool",
                            "comparator": "is_false"
                          },
                          "children": [
                            {
                              "id": "n6",
                              "type": "action",
                              "label": "Ozempic titrate to full dose with 3 monthly A1c's",
                              "edge_label": "true",
                              "children": [
                                {
                                  "id": "n7",
                                  "type": "decision",
                                  "label": "A1c not controlled after Ozempic?",
                                  "input_ids": [
                                    "input_ozempic_a1c_controlled_bool"
                                  ],
                                  "condition": {
                                    "input_id": "input_ozempic_a1c_controlled_bool",
                                    "comparator": "is_false"
                                  },
                                  "children": [
                                    {
                                      "id": "n8",
                                      "type": "output",
                                      "label": "Refer to Insulin Initiator",
                                      "edge_label": "true"
                                    },
                                    {
                                      "id": "n9",
                                      "type": "output",
                                      "label": "Ozempic titrate to full dose with 3 monthly A1cs",
                                      "edge_label": "false"
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": "n10",
                              "type": "output",
                              "label": "SGLT2i (CVD path)",
                              "edge_label": "false"
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": "n11",
                      "type": "output",
                      "label": "Metformin (CVD path)",
                      "edge_label": "false"
                    }
                  ]
                }
              ]
            },
            {
              "id": "n12",
              "type": "decision",
              "label": "Symptoms & New A1c >58?",
              "edge_label": "false",
              "input_ids": [
                "input_symptoms_new_a1c_gt58_bool"
              ],
              "condition": {
                "input_id": "input_symptoms_new_a1c_gt58_bool",
                "comparator": "is_true"
              },
              "children": [
                {
                  "id": "n13",
                  "type": "decision",
                  "label": "Admission required?",
                  "edge_label": "true",
                  "input_ids": [
                    "input_admission_required_bool"
                  ],
                  "condition": {
                    "input_id": "input_admission_required_bool",
                    "comparator": "is_true"
                  },
                  "children": [
                    {
                      "id": "n14",
                      "type": "output",
                      "label": "Admit via A&E/Medics",
                      "edge_label": "true"
                    },
                    {
                      "id": "n15",
                      "type": "output",
                      "label": "Start Gliclazide or Insulin",
                      "edge_label": "false"
                    }
                  ]
                },
                {
                  "id": "n16",
                  "type": "action",
                  "label": "Metformin",
                  "edge_label": "false",
                  "children": [
                    {
                      "id": "n17",
                      "type": "decision",
                      "label": "A1c not controlled - Start Dual Therapy?",
                      "input_ids": [
                        "input_a1c_controlled_on_metformin_bool"
                      ],
                      "condition": {
                        "input_id": "input_a1c_controlled_on_metformin_bool",
                        "comparator": "is_false"
                      },
                      "children": [
                        {
                          "id": "n18",
                          "type": "action",
                          "label": "Gliptin Or Pioglitazone Or Gliclazide",
                          "edge_label": "true",
                          "children": [
                            {
                              "id": "n19",
                              "type": "decision",
                              "label": "A1c Not Controlled - Start Triple Therapy?",
                              "input_ids": [
                                "input_a1c_controlled_on_dual_bool"
                              ],
                              "condition": {
                                "input_id": "input_a1c_controlled_on_dual_bool",
                                "comparator": "is_false"
                              },
                              "children": [
                                {
                                  "id": "n20",
                                  "type": "action",
                                  "label": "Metformin + Gliptin/Pioglitazone/Gliclazide (consider SGLT2i)",
                                  "edge_label": "true",
                                  "children": [
                                    {
                                      "id": "n21",
                                      "type": "action",
                                      "label": "Add GLP",
                                      "children": [
                                        {
                                          "id": "n22",
                                          "type": "decision",
                                          "label": "High prognostic value",
                                          "input_ids": [
                                            "input_high_prognostic_value_bool"
                                          ],
                                          "condition": {
                                            "input_id": "input_high_prognostic_value_bool",
                                            "comparator": "is_true"
                                          },
                                          "children": [
                                            {
                                              "id": "n23",
                                              "type": "action",
                                              "label": "Ozempic",
                                              "edge_label": "true",
                                              "children": [
                                                {
                                                  "id": "n24",
                                                  "type": "decision",
                                                  "label": "Despite Optimisation and maximally tolerated dose A1C >58?",
                                                  "input_ids": [
                                                    "input_a1c_gt58_despite_optimisation_bool"
                                                  ],
                                                  "condition": {
                                                    "input_id": "input_a1c_gt58_despite_optimisation_bool",
                                                    "comparator": "is_true"
                                                  },
                                                  "children": [
                                                    {
                                                      "id": "n25",
                                                      "type": "output",
                                                      "label": "Refer to Insulin Initiator",
                                                      "edge_label": "true"
                                                    },
                                                    {
                                                      "id": "n26",
                                                      "type": "output",
                                                      "label": "Ozempic (CVD path)",
                                                      "edge_label": "false"
                                                    }
                                                  ]
                                                }
                                              ]
                                            },
                                            {
                                              "id": "n27",
                                              "type": "output",
                                              "label": "Mounjaro",
                                              "edge_label": "false"
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": "n28",
                                  "type": "output",
                                  "label": "Dual Therapy: Gliptin or Pioglitazone or Gliclazide",
                                  "edge_label": "false"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": "n29",
                          "type": "output",
                          "label": "Metformin (no CVD risk)",
                          "edge_label": "false"
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  },
  "doubts": [
    "The 'Not tolerated** switch to' arrow from Metformin (CVD path) leading to a different branch is ambiguous - it is unclear where exactly 'not tolerated' redirects in the CVD path (possibly to SGLT2i directly or to a different drug).",
    "The 'Minimum BMI for GLP Initiation is 23' box appears to be an annotation/condition for starting GLP/Ozempic but has no clear flow arrow - treated as annotation not a flow node.",
    "The 'High prognostic value' and 'Low prognostic value' nodes are shown as decision/branch points but the diagram uses them as labels on branches from a single decision - interpretation as a single decision node is assumed.",
    "It is unclear whether the 'Add GLP' and subsequent Ozempic/Mounjaro path is only triggered from triple therapy or also from other paths; the diagram suggests it follows triple therapy.",
    "The 'Despite Optimisation and maximally tolerated dose A1C >58' node on the right side appears to connect back to 'Refer to Insulin Initiator' but also connects from the Ozempic (CVD path) - the exact flow merge is ambiguous.",
    "The left-side symptom/admission sub-flow and the main metformin flow both lead to 'Metformin' but via different paths; it is unclear if they truly merge or are parallel paths.",
    "Several informational side panels (Metformin Tolerability, SGLT2i info, Gliclazide, Gliptins, Pioglitazone, Scheduling Follow-up, Sick Day Rules, Driving, CVD Known or Risk criteria, Prognostic Value) are treated as annotations/knowledge panels, not flow nodes.",
    "The 'Metformin AccuRx' box in the top right appears to be a reference/resource panel, not a flow node."
  ],
  "variables": [
    {
      "id": "input_cvd_known_or_risk_bool",
      "name": "cvd_known_or_risk",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_metformin_tolerated_bool",
      "name": "metformin_tolerated",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_sglt2i_a1c_controlled_bool",
      "name": "sglt2i_a1c_controlled",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_ozempic_a1c_controlled_bool",
      "name": "ozempic_a1c_controlled",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_symptoms_new_a1c_gt58_bool",
      "name": "symptoms_new_a1c_gt58",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_admission_required_bool",
      "name": "admission_required",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_a1c_controlled_on_metformin_bool",
      "name": "a1c_controlled_on_metformin",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_a1c_controlled_on_dual_bool",
      "name": "a1c_controlled_on_dual",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_high_prognostic_value_bool",
      "name": "high_prognostic_value",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_a1c_gt58_despite_optimisation_bool",
      "name": "a1c_gt58_despite_optimisation",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    }
  ]
}