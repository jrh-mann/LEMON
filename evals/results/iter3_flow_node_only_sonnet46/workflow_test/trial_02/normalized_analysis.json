{
  "inputs": [],
  "outputs": [
    {
      "name": "No Further Action",
      "description": "No further action required (specialist clinic branch)."
    },
    {
      "name": "Mark as Satisfactory",
      "description": "Mark the result as satisfactory."
    },
    {
      "name": "Mark as \"No Further Action\"",
      "description": "Mark as no further action (lipid lowering therapy branch)."
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx message with self booking link (not optimised, taking therapy branch)."
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx message with self booking link (not taking maximally tolerated statin branch)."
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx message (upper, not optimised branch)."
    },
    {
      "name": "Consider Lipid Clinic Referral",
      "description": "Consider referral to lipid clinic."
    },
    {
      "name": "Refer to specialist",
      "description": "Refer the patient to a specialist."
    },
    {
      "name": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
      "description": "Send lipid lowering therapy AccuRx (secondary, QRISK high, not optimised)."
    },
    {
      "name": "Send \"High Cholesterol - Low QRISK\" AccuRx with self booking link",
      "description": "Send high cholesterol low QRISK AccuRx message."
    },
    {
      "name": "No Further Action",
      "description": "No further action (LDL \u22642 branch)."
    },
    {
      "name": "Initiate Inclisiran",
      "description": "Initiate Inclisiran treatment."
    },
    {
      "name": "Repeat Lipids at 3 months",
      "description": "Repeat lipid test at 3 months."
    },
    {
      "name": "Add in Ezetimibe",
      "description": "Add Ezetimibe to treatment."
    }
  ],
  "tree": {
    "start": {
      "id": "start",
      "type": "start",
      "label": "Lipid Results - Management Guide",
      "children": [
        {
          "id": "n_assess_total_cholesterol",
          "type": "action",
          "label": "Assess Total Cholesterol Result",
          "input_ids": [
            "input_total_cholesterol_result_float"
          ],
          "edge_label": "",
          "children": [
            {
              "id": "n_cholesterol_threshold",
              "type": "decision",
              "label": "> 7.5 or \u2264 7.5?",
              "input_ids": [
                "input_total_cholesterol_result_float"
              ],
              "condition": {
                "input_id": "input_total_cholesterol_result_float",
                "comparator": "gt",
                "value": 7.5
              },
              "children": [
                {
                  "id": "n_under_specialist_above75",
                  "type": "decision",
                  "label": "Under Specialist Clinic?",
                  "input_ids": [
                    "input_under_specialist_clinic_bool"
                  ],
                  "condition": {
                    "input_id": "input_under_specialist_clinic_bool",
                    "comparator": "is_true"
                  },
                  "edge_label": "true",
                  "children": [
                    {
                      "id": "n_no_further_action_specialist",
                      "type": "output",
                      "label": "No Further Action",
                      "edge_label": "true",
                      "children": []
                    },
                    {
                      "id": "n_optimised_upper",
                      "type": "decision",
                      "label": "Are They Optimised on treatment?",
                      "input_ids": [
                        "input_optimised_on_treatment_upper_bool"
                      ],
                      "condition": {
                        "input_id": "input_optimised_on_treatment_upper_bool",
                        "comparator": "is_true"
                      },
                      "edge_label": "false",
                      "children": [
                        {
                          "id": "n_consider_lipid_clinic",
                          "type": "output",
                          "label": "Consider Lipid Clinic Referral",
                          "edge_label": "true",
                          "children": []
                        },
                        {
                          "id": "n_primary_secondary_upper",
                          "type": "decision",
                          "label": "Primary/Secondary Treatment",
                          "input_ids": [
                            "input_primary_or_secondary_enum"
                          ],
                          "condition": {
                            "input_id": "input_primary_or_secondary_enum",
                            "comparator": "enum_eq",
                            "value": "Primary"
                          },
                          "edge_label": "false",
                          "children": [
                            {
                              "id": "n_refer_specialist",
                              "type": "output",
                              "label": "Refer to specialist",
                              "edge_label": "true",
                              "children": []
                            },
                            {
                              "id": "n_send_lipid_upper_not_optimised",
                              "type": "output",
                              "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                              "edge_label": "false",
                              "children": []
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "n_normal_or_raised",
                  "type": "decision",
                  "label": "Normal or Raised?",
                  "input_ids": [
                    "input_cholesterol_normal_or_raised_enum"
                  ],
                  "condition": {
                    "input_id": "input_cholesterol_normal_or_raised_enum",
                    "comparator": "enum_eq",
                    "value": "Normal"
                  },
                  "edge_label": "false",
                  "children": [
                    {
                      "id": "n_mark_satisfactory",
                      "type": "output",
                      "label": "Mark as Satisfactory",
                      "edge_label": "true",
                      "children": []
                    },
                    {
                      "id": "n_taking_lipid_lowering",
                      "type": "decision",
                      "label": "Taking Lipid Lowering Therapy?",
                      "input_ids": [
                        "input_taking_lipid_lowering_therapy_bool"
                      ],
                      "condition": {
                        "input_id": "input_taking_lipid_lowering_therapy_bool",
                        "comparator": "is_true"
                      },
                      "edge_label": "false",
                      "children": [
                        {
                          "id": "n_optimised_lower",
                          "type": "decision",
                          "label": "Are They Optimised on treatment?",
                          "input_ids": [
                            "input_optimised_on_treatment_lower_bool"
                          ],
                          "condition": {
                            "input_id": "input_optimised_on_treatment_lower_bool",
                            "comparator": "is_true"
                          },
                          "edge_label": "true",
                          "children": [
                            {
                              "id": "n_mark_no_further_action",
                              "type": "output",
                              "label": "Mark as \"No Further Action\"",
                              "edge_label": "true",
                              "children": []
                            },
                            {
                              "id": "n_send_lipid_not_optimised",
                              "type": "output",
                              "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                              "edge_label": "false",
                              "children": []
                            }
                          ]
                        },
                        {
                          "id": "n_primary_secondary_decision",
                          "type": "decision",
                          "label": "Primary or Secondary Prevention?",
                          "input_ids": [
                            "input_primary_or_secondary_enum"
                          ],
                          "condition": {
                            "input_id": "input_primary_or_secondary_enum",
                            "comparator": "enum_eq",
                            "value": "Primary"
                          },
                          "edge_label": "false",
                          "children": [
                            {
                              "id": "n_calculate_qrisk",
                              "type": "action",
                              "label": "Calculate QRISK2/3",
                              "input_ids": [
                                "input_qrisk_score_float"
                              ],
                              "edge_label": "true",
                              "children": [
                                {
                                  "id": "n_qrisk_threshold",
                                  "type": "decision",
                                  "label": "\u2265 10% or < 10%?",
                                  "input_ids": [
                                    "input_qrisk_score_float"
                                  ],
                                  "condition": {
                                    "input_id": "input_qrisk_score_float",
                                    "comparator": "gte",
                                    "value": 10
                                  },
                                  "children": [
                                    {
                                      "id": "n_send_lipid_qrisk_high",
                                      "type": "output",
                                      "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                                      "edge_label": "true",
                                      "children": []
                                    },
                                    {
                                      "id": "n_send_high_chol_low_qrisk",
                                      "type": "output",
                                      "label": "Send \"High Cholesterol - Low QRISK\" AccuRx with self booking link",
                                      "edge_label": "false",
                                      "children": []
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": "n_taking_max_statin",
                              "type": "decision",
                              "label": "Taking Maximally Tolerated Statin?",
                              "input_ids": [
                                "input_taking_maximally_tolerated_statin_bool"
                              ],
                              "condition": {
                                "input_id": "input_taking_maximally_tolerated_statin_bool",
                                "comparator": "is_true"
                              },
                              "edge_label": "false",
                              "children": [
                                {
                                  "id": "n_assess_ldl",
                                  "type": "action",
                                  "label": "Assess LDL",
                                  "input_ids": [
                                    "input_ldl_float"
                                  ],
                                  "edge_label": "true",
                                  "children": [
                                    {
                                      "id": "n_ldl_branch",
                                      "type": "decision",
                                      "label": "LDL \u2265 2.6, LDL 2-2.5, or LDL \u22642?",
                                      "input_ids": [
                                        "input_ldl_float"
                                      ],
                                      "condition": {
                                        "input_id": "input_ldl_float",
                                        "comparator": "gte",
                                        "value": 2.6
                                      },
                                      "children": [
                                        {
                                          "id": "n_initiate_inclisiran",
                                          "type": "output",
                                          "label": "Initiate Inclisiran",
                                          "edge_label": "true",
                                          "children": []
                                        },
                                        {
                                          "id": "n_ldl_225_branch",
                                          "type": "decision",
                                          "label": "LDL 2-2.5?",
                                          "input_ids": [
                                            "input_ldl_float"
                                          ],
                                          "condition": {
                                            "input_id": "input_ldl_float",
                                            "comparator": "within_range",
                                            "value": 2.0,
                                            "value2": 2.5
                                          },
                                          "edge_label": "false",
                                          "children": [
                                            {
                                              "id": "n_had_6_months_inclisiran",
                                              "type": "decision",
                                              "label": "Has had 6 months of Inclisiran / Hasn't had 6 months of Inclisiran?",
                                              "input_ids": [
                                                "input_had_6_months_inclisiran_bool"
                                              ],
                                              "condition": {
                                                "input_id": "input_had_6_months_inclisiran_bool",
                                                "comparator": "is_true"
                                              },
                                              "edge_label": "true",
                                              "children": [
                                                {
                                                  "id": "n_ldl_gt2_check",
                                                  "type": "decision",
                                                  "label": "LDL >2.0?",
                                                  "input_ids": [
                                                    "input_ldl_after_inclisiran_float"
                                                  ],
                                                  "condition": {
                                                    "input_id": "input_ldl_after_inclisiran_float",
                                                    "comparator": "gt",
                                                    "value": 2.0
                                                  },
                                                  "edge_label": "true",
                                                  "children": [
                                                    {
                                                      "id": "n_add_ezetimibe",
                                                      "type": "output",
                                                      "label": "Add in Ezetimibe",
                                                      "edge_label": "true",
                                                      "children": []
                                                    },
                                                    {
                                                      "id": "n_repeat_lipids",
                                                      "type": "output",
                                                      "label": "Repeat Lipids at 3 months",
                                                      "edge_label": "false",
                                                      "children": []
                                                    }
                                                  ]
                                                },
                                                {
                                                  "id": "n_repeat_lipids_no_inclisiran",
                                                  "type": "output",
                                                  "label": "Repeat Lipids at 3 months",
                                                  "edge_label": "false",
                                                  "children": []
                                                }
                                              ]
                                            },
                                            {
                                              "id": "n_no_further_action_ldl_low",
                                              "type": "output",
                                              "label": "No Further Action",
                                              "edge_label": "false",
                                              "children": []
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                },
                                {
                                  "id": "n_send_lipid_no_max_statin",
                                  "type": "output",
                                  "label": "Send \"Lipid Lowering Therapy\" AccuRx with self booking link",
                                  "edge_label": "false",
                                  "children": []
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  },
  "doubts": [
    "The 'not coded, assume no' annotation near the Under Specialist Clinic decision implies a default value; this is treated as edge_label false (not under specialist clinic) but may vary by implementation.",
    "The 'We assume Normal to be 5 or below (can vary from clinic to clinic)' annotation is a guidance note, not a flow node; the threshold for Normal vs Raised may differ per clinic.",
    "The 'Primary/Secondary Treatment' label appears on a yellow sticky note near the upper branch (optimised on treatment = No), suggesting further branching, but arrows are ambiguous. The flow to 'Refer to specialist' vs 'Send Lipid Lowering Therapy' is inferred from diagram context.",
    "The 'Consultation' label near the upper 'Are They Optimised on treatment?' node appears to be an annotation, not a distinct flow step.",
    "The LDL 2-2.5 branch has a complex sub-flow involving Inclisiran and Ezetimibe; the exact branching logic between 'Has had 6 months of Inclisiran' and LDL >2.0 check may not be fully captured.",
    "There are two separate 'Repeat Lipids at 3 months' nodes implied by the diagram; one is under 'hasn't had 6 months of Inclisiran' and one under LDL \u22642.0 after Inclisiran. The diagram shows a single box that feeds into the LDL >2.0 decision, so the exact tree structure is uncertain.",
    "The 'Is the patient's treatment optimised?' box in the lower right appears to be a knowledge-summary panel, not a flow node, and has been excluded.",
    "The 'Inclisiran before Ezetimibe in Secondary Prevention?' panel is a guidance note and has been excluded from the flow.",
    "The 'Maximally Tolerated Treatment - Treatment Order' panel is a reference guide and has been excluded from the flow."
  ],
  "variables": [
    {
      "id": "input_total_cholesterol_result_float",
      "name": "total_cholesterol_result",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_under_specialist_clinic_bool",
      "name": "under_specialist_clinic",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_optimised_on_treatment_upper_bool",
      "name": "optimised_on_treatment_upper",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_primary_or_secondary_enum",
      "name": "primary_or_secondary",
      "type": "enum",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_cholesterol_normal_or_raised_enum",
      "name": "cholesterol_normal_or_raised",
      "type": "enum",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_taking_lipid_lowering_therapy_bool",
      "name": "taking_lipid_lowering_therapy",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_optimised_on_treatment_lower_bool",
      "name": "optimised_on_treatment_lower",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_qrisk_score_float",
      "name": "qrisk_score",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_taking_maximally_tolerated_statin_bool",
      "name": "taking_maximally_tolerated_statin",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_ldl_float",
      "name": "ldl",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_had_6_months_inclisiran_bool",
      "name": "had_6_months_inclisiran",
      "type": "bool",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    },
    {
      "id": "input_ldl_after_inclisiran_float",
      "name": "ldl_after_inclisiran",
      "type": "float",
      "description": "Inferred from workflow conditions.",
      "source": "inferred"
    }
  ]
}